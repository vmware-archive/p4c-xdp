# Travis CI integration for p4c using Docker.

sudo: required

services:
  - docker

env:
  - CTEST_PARALLEL_LEVEL=4

install:
  - sudo modprobe sch_netem
  - sudo modprobe sch_htb
  - sudo modprobe sch_ingress
  - sudo docker build -t p4c-xdp .

script:
  - sudo docker run --privileged -w /home/p4c/build --cap-add ALL -v /lib/modules:/lib/modules -e CTEST_PARALLEL_LEVEL p4c-xdp sudo ctest -R xdp --output-on-failure --schedule-random

notifications:
  email:
    recipients:
      - tuc@vmware.com
      - mbudiu@vmware.com

