\section{Challenges}\label{sec:conclusions}
In general, our development experience is mirrored by the lessons described 
in~\cite{minao-hspr18} and ~\cite{bertin-netdev17}.

\paragraph{No multi-/broadcast support}
While XDP is able to redirect single frames it does not have the ability to 
clone and redirect packets similar to \texttt{bpf\_clone\_redirect}. This makes 
development of more sophisticated P4 forwarding programs problematic.
\paragraph{The stack size is to small}
More complex XDP programs are rejected by the verifier despite their safeness. 
This is a particular challenge when attempting to implement network function 
chaining or more advanced pipelined packet processing in a single XDP program.

\paragraph{XDP generic and TCP}
Our testing framework uses virtual Linux interfaces and XDP \texttt{generic} 
to verify XDP programs. 
Unfortunately, we are unable to test TCP streams as the protocol is not 
supported by this driver.
Any program loaded by XDP \texttt{generic} operates after the creation of 
the \texttt{skb} and requires the original packet data. Since TCP clones every 
packet and passes the unmodifiable \texttt{skb} clone,  XDP \texttt{generic} is 
bypassed and never receives the datagram.
\paragraph{Missing userspace library}
Creating of compilation of eBPF programs in userspace requires substantial 
effort. Many function calls and variables available in sample programs are not 
available as C library and have to copied from kernel code or assembled from 
various online sources.

\paragraph{Persistent eBPF maps in namespaces}
[need to verify] When using eBPF programs in namespaces, maps exported via tc 
do not persist across \texttt{ip netns exec} calls. The consequence is that any 
program has to be run in a single shell command, otherwise the eBPF map becomes 
unusable despite the continued existence of the namespace.